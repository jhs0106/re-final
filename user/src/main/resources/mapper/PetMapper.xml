<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="edu.sm.app.repository.PetMapper">

    <resultMap id="PetResultMap" type="edu.sm.app.dto.PetDto">
        <id     column="pet_id"    property="petId"/>
        <result column="name"      property="petName"/>
        <result column="type"      property="species"/>
        <result column="weight"    property="weight"/>
        <result column="age"       property="age"/>
        <result column="gender"    property="gender"/>
        <result column="user_id"   property="userId"/>
    </resultMap>

    <!-- user_id 기준으로 대표 반려동물 1마리 -->
    <select id="findMainPetByUserId"
            parameterType="int"
            resultMap="PetResultMap">
        SELECT
            pet_id,
            name,
            type,
            weight,
            age,
            gender,
            user_id
        FROM pets
        WHERE user_id = #{userId}
        ORDER BY pet_id
            LIMIT 1
    </select>

</mapper>
